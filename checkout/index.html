<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>Checkout</title>
	<script type="module" src="https://ui.payfunc.com/checkout/payfunc-checkout/payfunc-checkout.esm.js"></script>
	<script nomodule="" src="https://ui.payfunc.com/checkout/payfunc-checkout/payfunc-checkout.js"></script>
	<link href="https://theme.payfunc.com/light/index.css" rel="stylesheet">
	<link rel="apple-touch-icon" sizes="180x180" href="https://brand.payfunc.com/icon/apple-icon.png">
	<link rel="icon" type="image/x-icon" href="https://brand.payfunc.com/icon/favicon.ico">
	<style>
		body>aside {
			position: absolute;
			right: 1em;
			bottom: 1em;
			background-color: rgb(var(--smoothly-warning-color), .4);
			padding: 0 1em;
			border: solid 1px rgb(var(--smoothly-warning-color), .8);
			border-radius: 1em;
		}

		body>aside>dl>dt {
			font-weight: 600;
		}
	</style>
	<script>
		query = parseQuery(location.search)
		function parseQuery(queryString) {
		var result = {}
		var pairs = (queryString[0] === "?" ? queryString.substr(1) : queryString).split("&")
		for (var i = 0; i < pairs.length; i++) {
			var pair = pairs[i].split("=")
			const property = decodeURIComponent(pair[0])
			const valueString = decodeURIComponent(pair[1] || "").replace(/\+/gi, " ")
			console.log("property", property, valueString)
			const value = JSON.parse(valueString)
			if (result.hasOwnProperty(property)) {
				const before = result[property]
				if (Array.isArray(before))
					result[property].push(value)
				else
					result[property] = [ before, value ]
			} else
				result[property] = value
		}
		return result
	}
	console.log("query", query)
	</script>
</head>
<body style="width: 100%; max-width: 20em; margin-left: auto; margin-right: auto;">
	<header><h1>Checkout</h1></header>
	<main>
		<form action="../done" method="get">
			<payfunc-checkout currency="EUR" api-key="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJodHRwczovL2FwaS5wYXlmdW5jLmNvbSIsImlhdCI6MTYxNDU5OTg3MiwibmFtZSI6ImRlbW9kZW1vIiwidXJsIjoid3d3LmV4YW1wbGUuY29tIiwiZW1haWwiOiJqcnhMRHBrbG5JbzJacTJOemtBcU5CaTk4YzJDeDFybFVGS0VkTDBFdG1JNlphTTJrTWpUcEsteGFJcEJmVng4UzNYeEJhdHRiT2pET1F6QUlrNlpkMmRwTFhsNE0zQnJOWEJEZFVFaUxDSnViM1JwWm5raU9pSWlmUSIsImNhcmQiOnsiYWNxdWlyZXIiOiJROUk4ZGhrRHdPa3RvVU54NEYtbV8zYWszS0tPbEdHbFhHa1hZLUtEcXFZa0F0Zy04UkNOaU5nUFZkcmtDLVRJb0hQbXN5ZmY4UlI0dktiWmFNR05xU0p3Y205MGIyTnZiQ0k2SW1sdWRHVnlaMmx5YnlJc0luVnliQ0k2SW1oMGRIQnpPaTh2WVhCcExuQmhlV1oxYm1NdVkyOXRJbjAiLCJjb3VudHJ5IjoiU0UiLCJkZXNjcmlwdG9yIjoiZGVtbyB0cmFuc2FjdGlvbiIsImVtdjNkIjoieFJnT2ZncFBDdC0zMEM4Umh0VWxId2o0aF92Q3dtbXJJMnpaeWYyeG1QcW9fWlY4X0lQRmFodEFEN1dPc040VTNJLVp3aEk0RklXdHFfMHMwM3lTamlJc0luVnliQ0k2SW1oMGRIQnpPaTh2YzJWeWRtbGpaUzV6WVc1a1ltOTRMak5rYzJWamRYSmxMbWx2SW4xZCIsImlkIjoiZGVtbyIsIm1jYyI6IjEyMzQiLCJtaWQiOiIxMjM0IiwidXJsIjoiaHR0cHM6Ly9hcGkucGF5ZnVuYy5jb20ifSwic3ViIjoiZGVtb2RlbW8iLCJhZ2VudCI6ImRlbW8iLCJhdWQiOiJwdWJsaWMiLCJmZWF0dXJlcyI6IiJ9.EsU_kK1AnXIicRkNs0HVsKreNzcIf9E0nqbpQS8vr_s"></payfunc-checkout>
		</form>
	</main>
	<aside>
		<dl>
			<dt>Maria Mullb√§r</dt>
			<dd>198411136115</dd>
			<dd>16993</dd>
			<dt>Tom Johansson</dt>
			<dd>198506086118</dd>
			<dd>16001</dd>
			<dt>Test Card</dt>
			<dd>5204740000001002</dd>
		</dl>
	</aside>
	<script>
		const checkout = document.body.querySelector("body > main > form > payfunc-checkout")
		const items = JSON.stringify(query.item)
		checkout.setAttribute("items", items)
	</script>
</body>
</html>
