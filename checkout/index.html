<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>Checkout</title>
	<script src="http://api.payfunc.com/ui/checkout/payfunc-checkout.js"></script>
	<link href="https://theme.payfunc.com/ct-light/index.css" rel="stylesheet">	<script>
		query = parseQuery(location.search)
		function parseQuery(queryString) {
		var result = {}
		var pairs = (queryString[0] === "?" ? queryString.substr(1) : queryString).split("&")
		for (var i = 0; i < pairs.length; i++) {
			var pair = pairs[i].split("=")
			const property = decodeURIComponent(pair[0])
			const value = JSON.parse(decodeURIComponent(pair[1] || ""))
			if (result.hasOwnProperty(property)) {
				const before = result[property]
				if (Array.isArray(before))
					result[property].push(value)
				else
					result[property] = [ before, value ]
			} else
				result[property] = value
		}
		return result
	}
	console.log("query", query)
	</script>
</head>
<body>
	<header><h1>Checkout</h1></header>
	<main>
		<form action="../done" method="get">
			<payfunc-checkout currency="SEK" api-key="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJodHRwczovL2FwaS5wYXlmdW5jLmNvbSIsImlhdCI6MTU2OTQxMTM1NTY4OCwiYXVkIjoicHVibGljIiwic3ViIjoidGVzdCIsIm5hbWUiOiJUZXN0IE1lcmNoYW50Iiwib3B0aW9uIjp7Im1hc2giOiJCUWh0aFM3cmhqMjRtQmRuYV9McUpSRnk3c2NUZWowSVlVSG9FaHhya0h3Z2xkcmRubF90bWhsU29NVmVpTGFaU2JITklIZW5SRHFyUDlNUGxKT2hEbmtpT2lJMlltUjZZMkpPVG5KV1JubEVaM2xNUWpKTGExRjFPVVVpTENKdFpYSmphR0Z1ZENJNk5YMCIsInNtcyI6IlRFZXlfS2F5S3hJZnktZkdXUzA0TDhEZ0JFTlRjcFI3MllaMUdLdU8xcWxUeUJ2am5MZVZ0MllYakJOUXdTNXdKX0pxWWJJRWl6X3N3SDFTTTFDaWpVMVVaM2RPUlVWNVRYcHNRMDU2V1ROTmVsRXlUVVJaZDAxRVNUVk5hbXhDSWl3aWMyVnVaR1Z5SWpvaVZHVnpkRTFsY21Ob1lXNTBJbjAiLCJjYXJkIjoiZXlKaGJHY2lPaUpJVXpJMU5pSXNJblI1Y0NJNklrcFhWQ0o5LmV5SnBjM01pT2lKb2RIUndjem92TDJGd2FTNWpZWEprWm5WdVl5NWpiMjBpTENKcFlYUWlPakUxTmprME1UQTJNelUwTVRJc0ltRjFaQ0k2SW5CMVlteHBZeUlzSW5OMVlpSTZJblJsYzNRaUxDSnVZVzFsSWpvaVZHVnpkQ0JOWlhKamFHRnVkQ0lzSW1SbGMyTnlhWEIwYjNJaU9pSjBaWE4wSUhSeVlXNXpZV04wYVc5dUlpd2lZMjkxYm5SeWVTSTZJbE5GSWl3aVlXTnhkV2x5WlhJaU9pSTRUbXhuYnpCMVExUlNUWEEwTmtzeE9UUmZhMUpJUVZWUGFsZGhTVkp3TkVobFpWRXljRGxsWnpNeU4yOTNOa0pyWlVoTWRFcFdXbmw2WkY5S1ltZFhiVXMyV21wMWVYWndlblpaVlVSV1dIRTBNV3hJTWpCcFRFTktjbHBZYTJsUGFVbDZUbTFWTTA1SFJUSlBVekF6V20xV2JFeFVVbWhOZW1OMFdXMU9hMDlUTURKWlZFVXdUV3BKZDAxcWFHMWFhazFwWmxFaUxDSnRZMk1pT2lJeE1qTTBJaXdpWW1sdUlqcDdJbTFoYzNSbGNtTmhjbVFpT2lJeE16UTJOemdpTENKMmFYTmhJam9pTVRJek5DSjlmUS42UTFHMFJ2UF8zTG9IeVJRMUZvampyWDlrQzZPTlgwZVZJRDBnYmhMNGE4In19.TQ-vNk46uwNFYfAh0lMBwuA74RVK7M8kexf6IgqZ-Vs"></payfunc-checkout>
		</form>
	</main>
	<script>
		const checkout = document.body.querySelector("body > main > form > payfunc-checkout")
		const items = JSON.stringify(query.item)
		checkout.setAttribute("items", items)
	</script>
</body>
</html>
